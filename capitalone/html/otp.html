<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>OTP Verification — CapitalOne</title>

  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/loader.css">
</head>
<body>

  <div class="loader-container" id="globalLoader">
    <div class="loader"></div>
  </div>

  <button class="floating-back-btn" onclick="goBackToDashboard()">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="15 18 9 12 15 6"></polyline>
    </svg>
  </button>

  <div class="container">
    <div class="card auth-card">
      <h2>OTP Verification</h2>

      <!-- Message shown ONLY after OTP is sent -->
      <p id="otpMessage"></p>

      <div id="sendOtpSection">
        <button id="sendOtpBtn" class="btn btn-primary">Send OTP</button>
      </div>

      <form id="otpForm" class="form" style="display:none;">
        <label>
          <input
            id="otpInput"
            type="text"
            inputmode="numeric"
            pattern="\d*"
            maxlength="6"
            placeholder="Enter 6-digit code"
            required
          >
        </label>
        <button class="btn btn-primary" type="submit">Verify</button>
      </form>

      <p class="muted" id="resendSection" style="display:none;">
        Didn’t get it?
        <button id="resendOtp" class="linklike">Resend OTP</button>
      </p>
    </div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

  <script src="../js/firebase-config.js"></script>
  <script src="../js/loader.js"></script>
  <script src="../js/otp.js"></script>
  <script src="../js/dashboard.js"></script>

  <script>
    function goBackToDashboard() {
      window.location.href = "dashboard.html";
    }
  </script>

</body>
</html>
